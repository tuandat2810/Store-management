<style>
  .agency-list-container {
    min-height: 100vh;
    padding: 0;
  }

  .agency-list-title {
    margin-top: 32px;
    margin-bottom: 0;
  }

  .agency-list-content {
    width: 95%;
    margin: 0 auto;
  }

  .agency-table-container {
    margin: 16px;
  }

  .pagination .page-link {
    color: black;                /* Màu chữ */
    background-color: #fff;      /* Màu nền (trang hiện tại có thể giữ nguyên) */
    border-color: black;         /* Màu viền */
  }

  .pagination .page-item.active .page-link {
    background-color: black;     /* Nền khi active */
    border-color: black;         /* Viền khi active */
    color: white;                /* Chữ khi active */
  }

  .pagination .page-link:hover {
    background-color: #333;      /* Nền khi hover */
    color: white;
  }
</style>

<div class="agency-list-container w-100">
  <!-- Tiêu đề trang -->
  <h3 class="agency-list-title text-center">
      Danh sách đại lý
  </h3>

  <!-- Container bọc search bar và table -->
  <div class="agency-list-content">
    <!-- Thanh tìm kiếm (search bar) căn phải -->
    <div class="d-flex justify-content-end mb-3">
      <div class="input-group" style="width: 300px;">
        <input
          type="text"
          class="form-control"
          placeholder="Tìm kiếm đại lý..."
          id="searchInput"
          value="{{searchQuery}}"
        />
        <button class="btn btn-outline-secondary" type="button" onclick="clearSearch()">
          <i class="bi bi-x"></i>
        </button>
        <button class="btn btn-outline-dark" type="button" onclick="performSearch()">
          <i class="bi bi-search"></i>
        </button>
      </div>
    </div>
  </div>

    <!-- Bảng dữ liệu sử dụng Bootstrap -->
  <div class="agency-table-container">
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col" class="text-center" style="width: 25%;">Mã đại lý</th>
          <th scope="col" class="text-center" style="width: 25%;">Tên đại lý</th>
          <th scope="col" class="text-center" style="width: 25%;">Loại</th>
          <th scope="col" class="text-center" style="width: 25%;">Quận</th>
        </tr>
      </thead>
      <tbody>
        {{#each agencyList}}
          <tr>
            <td class="text-center">{{ agencyCode }}</td>
            <td class="text-center">{{ name }}</td>
            <td class="text-center">{{ type }}</td>
            <td class="text-center">{{ district }}</td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
  <!-- Pagination căn giữa -->
  <div class="d-flex justify-content-center agency-pagination-row">
    <nav aria-label="Page navigation">
      <ul class="pagination">

        {{!-- Nút Previous --}}
        <li class="page-item {{#if (eq1 currentPage 1)}}disabled{{/if}}">
          <a class="page-link" href="?page={{subtract currentPage 1}}">Previous</a>
        </li>

        {{!-- Danh sách số trang --}}
        {{#each pages}}
          <li class="page-item {{#if (eq1 this ../currentPage)}}active{{/if}}">
            <a class="page-link" href="?page={{this}}">{{this}}</a>
          </li>
        {{/each}}

        {{!-- Nút Next --}}
        <li class="page-item {{#if (eq1 currentPage cntPage)}}disabled{{/if}}">
          <a class="page-link" href="?page={{add currentPage 1}}">Next</a>
        </li>

      </ul>
    </nav>
  </div>
</div>

<script>
function performSearch() {
    const searchQuery = document.getElementById('searchInput').value.trim();
    if (searchQuery) {
      // Thực hiện tìm kiếm với từ khóa
      window.location.href = `/main/danh_sach_dai_ly_admin?search=${encodeURIComponent(searchQuery)}&page=1`;
    }
  }

  // Khi người dùng nhấn nút xóa
  function clearSearch() {
    document.getElementById('searchInput').value = ''; // Xóa từ khóa tìm kiếm
    window.location.href = '/main/danh_sach_dai_ly_admin?page=1'; // Reset lại trang và tìm kiếm
  }
</script>