{{!-- <style>
  .agency-list-container {
    min-height: 100vh;
    padding: 0;
  }

  .agency-list-title {
    margin-top: 32px;
    margin-bottom: 0;
  }

  .agency-list-content {
    width: 95%;
    margin: 0 auto;
  }

  .agency-table-container {
    margin: 16px;
  }

  .pagination .page-link {
    color: black;                /* Màu chữ */
    background-color: #fff;      /* Màu nền (trang hiện tại có thể giữ nguyên) */
    border-color: black;         /* Màu viền */
  }

  .pagination .page-item.active .page-link {
    background-color: black;     /* Nền khi active */
    border-color: black;         /* Viền khi active */
    color: white;                /* Chữ khi active */
  }

  .pagination .page-link:hover {
    background-color: #333;      /* Nền khi hover */
    color: white;
  }
</style>

<div class="agency-list-container w-100">
  <!-- Tiêu đề trang -->
  <h3 class="agency-list-title text-center">
      Danh sách đại lý
  </h3>

  <!-- Container bọc search bar và table -->
  <div class="agency-list-content">
    <!-- Thanh tìm kiếm (search bar) căn phải -->
    <div class="d-flex justify-content-end mb-3">
      <div class="input-group" style="width: 300px;">
        <input
          type="text"
          class="form-control"
          placeholder="Tìm kiếm đại lý..."
          id="searchInput"
          value="{{searchQuery}}"
        />
        <button class="btn btn-outline-secondary" type="button" onclick="clearSearch()">
          <i class="bi bi-x"></i>
        </button>
        <button class="btn btn-outline-dark" type="button" onclick="performSearch()">
          <i class="bi bi-search"></i>
        </button>
      </div>
    </div>
  </div>

    <!-- Bảng dữ liệu sử dụng Bootstrap -->
  <div class="agency-table-container">
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col" class="text-center" style="width: 25%;">Mã đại lý</th>
          <th scope="col" class="text-center" style="width: 25%;">Tên đại lý</th>
          <th scope="col" class="text-center" style="width: 25%;">Loại</th>
          <th scope="col" class="text-center" style="width: 25%;">Quận</th>
        </tr>
      </thead>
      <tbody>
        {{#each agencyList}}
          <tr>
            <td class="text-center">{{ agencyCode }}</td>
            <td class="text-center">{{ name }}</td>
            <td class="text-center">{{ type }}</td>
            <td class="text-center">{{ district }}</td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
  <!-- Pagination căn giữa -->
  <div class="d-flex justify-content-center agency-pagination-row">
    <nav aria-label="Page navigation">
      <ul class="pagination">

        {{!-- Nút Previous --}}
        <li class="page-item {{#if (eq1 currentPage 1)}}disabled{{/if}}">
          <a class="page-link" href="?page={{subtract currentPage 1}}">&laquo;</a>
        </li>

        {{!-- Danh sách số trang --}}
        {{#each pages}}
          <li class="page-item {{#if (eq1 this ../currentPage)}}active{{/if}}">
            <a class="page-link" href="?page={{this}}">{{this}}</a>
          </li>
        {{/each}}

        {{!-- Nút Next --}}
        <li class="page-item {{#if (eq1 currentPage cntPage)}}disabled{{/if}}">
          <a class="page-link" href="?page={{add currentPage 1}}">&raquo;</a>
        </li>

      </ul>
    </nav>
  </div>
</div>
--}}


<style>
    .custom-select-wrapper {
        position: relative;
    }

    .custom-arrow {
        position: absolute;
        top: 50%;
        right: 26px;
        transform: translateY(-50%);
        font-size: 16px;
        transition: transform 0.3s ease;
        pointer-events: none;
        z-index: 10;
        background-color: #ffffff;
    }

    .custom-select:focus + .custom-arrow {
        transform: translateY(-50%) rotate(180deg);
    }

</style>

<div class="container-fluid d-flex flex-column mt-5 justify-content-center align-items-center px-5" style="width: 100%; height: 100%">
    <h3 class="mb-5 text-center w-100">
        Đăng ký đại lý
    </h3>
    <form action="/main/dang_ki_dai_ly" method="POST" class="w-100" style="max-width: 600px;">
        
        <!-- Mã đại lý (đưa lên đầu) -->
        <div class="mb-3 row">
            <label for="agencyCode" class="col-sm-3 col-form-label">Mã đại lý</label>
            <div class="col-sm-9">
                <input type="text" class="form-control" id="agencyCode" name="agencyCode" value="{{agencyCode}}" readonly>
            </div>
        </div>

        <!-- Tên đại lý -->
        <div class="mb-3 row">
            <label for="agencyName" class="col-sm-3 col-form-label">Tên đại lý</label>
            <div class="col-sm-9">
                <input type="text" class="form-control" id="agencyName" name="agencyName" placeholder="Nhập tên đại lý" required>
            </div>
        </div>

        <!-- Loại đại lý -->
        <div class="mb-3 row">
            <label for="agencyType" class="col-sm-3 col-form-label">Loại đại lý</label>
            <div class="col-sm-9 custom-select-wrapper">
                <select class="form-select custom-select" id="agencyType" name="agencyType" required>
                    <option value="">-- Chọn loại đại lý --</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                </select>
                <span class="custom-arrow">
                    <i class="bi bi-chevron-down"></i>
                </span>
            </div>
        </div>

        <!-- Email -->
        <div class="mb-3 row">
            <label for="email" class="col-sm-3 col-form-label">Email</label>
            <div class="col-sm-9">
                <input type="email" class="form-control" id="email" name="email" placeholder="Nhập email" required>
            </div>
        </div>

        <!-- Điện thoại -->
        <div class="mb-3 row">
            <label for="phoneNumber" class="col-sm-3 col-form-label">Điện thoại</label>
            <div class="col-sm-9">
                <input type="tel" class="form-control" id="phoneNumber" name="phoneNumber" placeholder="Nhập số điện thoại" required>
            </div>
        </div>

        <!-- Quận -->
        <div class="mb-3 row">
            <label for="district" class="col-sm-3 col-form-label">Quận</label>
            <div class="col-sm-9">
                <input type="text" class="form-control" id="district" name="district" placeholder="Nhập quận" required>
            </div>
        </div>

        <!-- Địa chỉ -->
        <div class="mb-3 row">
            <label for="address" class="col-sm-3 col-form-label">Địa chỉ</label>
            <div class="col-sm-9">
                <input type="text" class="form-control" id="address" name="address" placeholder="Nhập địa chỉ" required>
            </div>
        </div>

        <!-- Nút đăng ký -->
        <div class="text-center mt-5">
            <button type="submit" class="btn btn-primary border-0 rounded-5 fw-semibold px-5 py-2" 
                style="background-color: #C6BDBD; color: #000; width: 200px;"
                >
                Đăng ký
            </button>
        </div>
    </form>
</div>

<script>
function performSearch() {
    const searchQuery = document.getElementById('searchInput').value.trim();
    if (searchQuery) {
      // Thực hiện tìm kiếm với từ khóa
      window.location.href = `/main/danh_sach_dai_ly_admin?search=${encodeURIComponent(searchQuery)}&page=1`;
    }
  }

  // Khi người dùng nhấn nút xóa
  function clearSearch() {
    document.getElementById('searchInput').value = ''; // Xóa từ khóa tìm kiếm
    window.location.href = '/main/danh_sach_dai_ly?page=1'; // Reset lại trang và tìm kiếm
  }
</script> 