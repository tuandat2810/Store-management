<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<!-- Main Content -->
<main class="d-flex justify-content-center align-items-center min-vh-100 bg-secondary w-100 px-0">
    <div class="card p-4 shadow" style="max-width: 400px; width: 100%;">
        <!-- Title -->
        <h2 class="card-title text-center mb-4">Đăng nhập</h2>

        <!-- Login Form -->
        <form action="/page/login" method="POST">
            <div class="mb-3">
                <label for="username" class="form-label">Tên tài khoản</label>
                <input type="text" class="form-control {{#if username_error}}is-invalid{{/if}}" id="username" name="username" required>
                {{#if username_error}}
                <div class="invalid-feedback d-block">
                    {{username_error}}
                </div>
                {{/if}}
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Mật khẩu</label>
                <input type="password" class="form-control {{#if password_error}}is-invalid{{/if}}" id="password" name="password" required>
                {{#if password_error}}
                <div class="invalid-feedback d-block">
                    {{password_error}}
                </div>
                {{/if}}
            </div>
            <button type="submit" class="btn w-100" style= "background-color: #343a40;color:white">Đăng nhập</button>
        </form>

        <!-- Forgot Password Link -->
        <div class="text-center mt-3">
            <a href="/page/register" class="text-muted text-decoration-none" style="font-size: 14px;">Bạn chưa có tài khoản? Đăng ký</a>
        </div>
        <div class="text-center mt-3">
            <a href="/forgot-password" class="text-muted text-decoration-none" style="font-size: 14px;">Quên mật khẩu?</a>
        </div>
    </div>
</main>

<script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('form');
            form.addEventListener('submit', function(event) {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                if (!username || !password) {
                    event.preventDefault();
                    alert('Vui lòng nhập đầy đủ thông tin!');
                }
            });
        });
        const successMsg = "{{success_msg}}";
        console.log("Success Message:", successMsg);
        if(successMsg) {
            Swal.fire({
            toast: true,
            position: 'top-end',
            icon: 'success',
            title: 'Thành công',
            text: successMsg,
            timer: 2000,
            timerProgressBar: true,
            showConfirmButton: false
            });
        }
        const errorMsg = "{{error_msg}}";
        console.log("Error Message:", errorMsg);
        if(errorMsg) {
            Swal.fire({
                toast: true,
                position: 'top-end',
                icon: 'error',
                title: 'Thất bại!',
                text: errorMsg,
                timer: 5000,
                timerProgressBar: true,
                showConfirmButton: false
            });
        }
</script>