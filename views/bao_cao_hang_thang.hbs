<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">

<style>
  .bg-custom {
    background-image: linear-gradient(177.6deg, rgba(20, 0, 113, 1) 15.3%, rgba(1, 0, 62, 1) 91.3%);
  }

  .table-title {
    background-color: black;
    color: white;
    font-weight: bold;
    text-align: center;
  }

  .report-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 24px;
    justify-content: center;
  }

  .report-box {
    flex: 1;
    min-width: 450px;
  }
</style>

<div class="container-user container-fluid d-flex flex-column align-items-center" style="margin-top: 32px; max-width: 1200px;">
  <h3 class="mb-4 text-center w-100">B√°o c√°o th√°ng</h3>

  <!-- Form ch·ªçn th√°ng/nƒÉm/qu·∫≠n -->
  <form action="/main/bao_cao_hang_thang" method="POST" class="row g-3 w-100 mb-5" style="justify-content: center;">
    <div class="col-md-3">
      <label for="thang" class="form-label">Th√°ng</label>
      <select class="form-select" id="thang" name="thang" required>
        {{#each months}}
          <option value="{{this}}" {{#eq ../selectedMonth this}}selected{{/eq}}>Th√°ng {{this}}</option>
        {{/each}}
      </select>
    </div>

    <div class="col-md-3">
      <label for="nam" class="form-label">NƒÉm</label>
      <select class="form-select" id="nam" name="nam" required>
        {{#each years}}
          <option value="{{this}}" {{#eq ../selectedYear this}}selected{{/eq}}>{{this}}</option>
        {{/each}}
      </select>
    </div>

    <div class="col-md-3">
      <label for="district" class="form-label">Qu·∫≠n</label>
      <select class="form-select" id="district" name="district">
        <option value="">-- T·∫•t c·∫£ --</option>
        {{#each districts}}
          <option value="{{id}}" {{#eq ../selectedDistrict districtName}}selected{{/eq}}>{{districtName}}</option>
        {{/each}}
      </select>
    </div>

    <div class="col-md-3 d-flex align-items-end">
      <button type="submit" class="btn bg-custom text-white fw-semibold w-100">
        <i class="bi bi-bar-chart-line me-2"></i> L·∫≠p b√°o c√°o
      </button>
    </div>
  </form>



  <!-- üîÄ 2 ph·∫ßn chia ngang: Doanh thu | C√¥ng n·ª£ -->
  <div class="report-wrapper w-100">
    <!-- B√°o c√°o Doanh S·ªë -->
    <div class="report-box">
      <div class="table-title py-2">B√°o C√°o Doanh S·ªë</div>
      <p><strong>Th√°ng:</strong> {{selectedMonth}}/{{selectedYear}}</p>
      <table class="table table-bordered align-middle text-center">
        <thead class="table-secondary">
          <tr>
            <th>STT</th>
            <th>ƒê·∫°i l√Ω</th>
            <th>S·ªë Phi·∫øu Xu·∫•t</th>
            <th>T·ªïng Tr·ªã Gi√°</th>
            <th>T·ª∑ L·ªá (%)</th>
          </tr>
        </thead>
        <tbody>
          {{#each salesReport}}
            <tr>
              <td>{{@index}}</td>
              <td>{{agencyName}}</td>
              <td>{{numOrders}}</td>
              <td>{{formatCurrency totalSales}}</td>
              <td>{{percentage}}</td>
            </tr>
          {{else}}
            <tr><td colspan="5">Kh√¥ng c√≥ d·ªØ li·ªáu</td></tr>
          {{/each}}
        </tbody>
      </table>
    </div>


    <!-- B√°o c√°o C√¥ng N·ª£ -->
    <div class="report-box">
      <div class="table-title py-2">B√°o C√°o C√¥ng N·ª£ ƒê·∫°i L√Ω</div>
      <p><strong>Th√°ng:</strong> {{selectedMonth}}/{{selectedYear}}</p>
      <table class="table table-bordered align-middle text-center">
        <thead class="table-secondary">
          <tr>
            <th>STT</th>
            <th>ƒê·∫°i l√Ω</th>
            <th>N·ª£ ƒê·∫ßu</th>
            <th>Ph√°t Sinh</th>
            <th>N·ª£ Cu·ªëi</th>
          </tr>
        </thead>
        <tbody>
          {{#each debtReport}}
            <tr>
              <td>{{@index}}</td>
              <td>{{agencyName}}</td>
              <td>{{formatCurrency openingDebt}}</td>
              <td>{{formatCurrency incurred}}</td>
              <td>{{formatCurrency closingDebt}}</td>
            </tr>
          {{else}}
            <tr><td colspan="5">Kh√¥ng c√≥ d·ªØ li·ªáu</td></tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
</div>
